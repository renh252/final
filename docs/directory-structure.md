# ç›®éŒ„çµæ§‹èªªæ˜

> ğŸ“ **é‡è¦æç¤º**: æœ¬æ–‡æª”æè¿°äº†å°ˆæ¡ˆçš„ç›®éŒ„çµ„ç¹”è¦ç¯„ã€‚éŒ¯èª¤çš„ç›®éŒ„çµæ§‹æœƒå°è‡´ä¾è³´æ··äº‚ã€æ¬Šé™å•é¡Œå’Œç¶­è­·å›°é›£ã€‚

## ç³»çµ±æ¶æ§‹æ¦‚è¦½

å¯µç‰©é ˜é¤Šå¹³å°æ¡ç”¨åˆ†å±¤æ¶æ§‹è¨­è¨ˆï¼Œæ¸…æ™°åˆ†é›¢äº†ä¸åŒé¡å‹çš„ä»£ç¢¼ï¼š

```
å°ˆæ¡ˆæ¶æ§‹
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      å‰ç«¯é é¢å±¤       â”‚ â† app/(routes)/ å’Œ app/admin/(routes)/
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      UIçµ„ä»¶å±¤        â”‚ â† app/_components/ å’Œ app/admin/_components/
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      æ¥­å‹™é‚è¼¯å±¤       â”‚ â† app/_lib/ å’Œ app/admin/_lib/
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      APIè·¯ç”±å±¤        â”‚ â† app/api/
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      å…±äº«åŸºç¤å±¤       â”‚ â† app/lib/
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¾è³´é—œä¿‚è¦å‰‡**:

1. ä¸Šå±¤å¯ä»¥ä¾è³´ä¸‹å±¤ï¼Œä½†ä¸‹å±¤ä¸èƒ½ä¾è³´ä¸Šå±¤
2. åŒå±¤ä¹‹é–“å¯ä»¥ç›¸äº’ä¾è³´ï¼Œä½†æ‡‰ç›¡é‡æ¸›å°‘è€¦åˆ
3. å…±äº«åŸºç¤å±¤ä¸èƒ½ä¾è³´ä»»ä½•å…¶ä»–å±¤

## ä¸»è¦ç›®éŒ„ç”¨é€”

### `app/lib/`

æ­¤ç›®éŒ„åŒ…å«æ•´å€‹æ‡‰ç”¨ç¨‹åºçš„å…±ç”¨åŸºç¤åº«å’Œå·¥å…·å‡½æ•¸ï¼š

- é€šç”¨è³‡æ–™åº«é€£æ¥å’ŒæŸ¥è©¢åŠŸèƒ½
- å…±ç”¨å·¥å…·å‡½æ•¸ï¼ˆå¦‚æ¨£å¼ç®¡ç†ã€æ—¥æœŸè™•ç†ç­‰ï¼‰
- åŸºç¤é…ç½®å’Œå¸¸é‡
- é¡å‹å®šç¾©

ç‰¹é»ï¼š

- æä¾›åŸºç¤è¨­æ–½ç´šåˆ¥çš„åŠŸèƒ½
- å¯è¢«ä»»ä½•å…¶ä»–æ¨¡çµ„å¼•ç”¨
- ä¸åŒ…å«æ¥­å‹™é‚è¼¯
- è‘—é‡æ–¼å¯é‡ç”¨æ€§å’Œé€šç”¨æ€§

> **åš´æ ¼è¦ç¯„**:
>
> - æ­¤ç›®éŒ„ä¸­çš„ä»£ç¢¼ä¸å¾—åŒ…å« UI çµ„ä»¶æˆ–ç‰¹å®šæ¥­å‹™é‚è¼¯
> - ä¸å¾—å¾æ­¤ç›®éŒ„ç›´æ¥è¨ªå• API æˆ–å‰ç«¯ç‹€æ…‹
> - ä¸å¾—åœ¨æ­¤ç›®éŒ„ä¸­åŒ…å«ç’°å¢ƒç‰¹å®šé…ç½®

### `app/api/admin/_lib/`

æ­¤ç›®éŒ„å°ˆé–€ç”¨æ–¼å¾Œå°ç®¡ç†ç›¸é—œçš„åŠŸèƒ½ï¼š

- ç®¡ç†å“¡ç‰¹å®šçš„è³‡æ–™åº«æ“ä½œ
- æ¬Šé™é©—è­‰å’Œæˆæ¬Š
- æ•¸æ“šå°å…¥å°å‡ºåŠŸèƒ½
- ç®¡ç†å“¡å°ˆç”¨çš„å·¥å…·å‡½æ•¸

ç‰¹é»ï¼š

- åƒ…æœå‹™æ–¼å¾Œå°ç®¡ç†åŠŸèƒ½
- åŒ…å«ç®¡ç†å“¡ç‰¹å®šçš„æ¥­å‹™é‚è¼¯
- å¯ä»¥ä¾è³´ app/lib ä¸­çš„åŸºç¤åŠŸèƒ½
- éœ€è¦é¡å¤–çš„å®‰å…¨æ€§è€ƒæ…®

> **å¯¦ç¾è¦æ±‚**:
>
> - æ‰€æœ‰ç®¡ç†å“¡ç›¸é—œçš„æ•¸æ“šåº«æ“ä½œå¿…é ˆç¶“éæ¬Šé™æª¢æŸ¥
> - æ•æ„Ÿæ“ä½œå¿…é ˆè¨˜éŒ„å®Œæ•´æ—¥èªŒ
> - ä¸å¾—ç¹é API è·¯ç”±å±¤ç›´æ¥å¾å‰ç«¯è¨ªå•æ­¤ç›®éŒ„

## ä½¿ç”¨åŸå‰‡

1. æ–°åŠŸèƒ½é–‹ç™¼æ™‚çš„é¸æ“‡åŸå‰‡ï¼š

   - å¦‚æœæ˜¯é€šç”¨åŠŸèƒ½ï¼Œæ”¾åœ¨ `app/lib/`
   - å¦‚æœæ˜¯ç®¡ç†å“¡å°ˆç”¨åŠŸèƒ½ï¼Œæ”¾åœ¨ `app/api/admin/_lib/`
   - å‰ç«¯ UI çµ„ä»¶æ”¾åœ¨ `app/_components/` æˆ– `app/admin/_components/`
   - API è·¯ç”±æ”¾åœ¨ç›¸æ‡‰çš„ `app/api/` å­ç›®éŒ„ä¸­

2. ä»£ç¢¼ä¾è³´åŸå‰‡ï¼š

   - `app/lib/` ä¸æ‡‰è©²ä¾è³´ `app/api/admin/_lib/`
   - `app/api/admin/_lib/` å¯ä»¥ä¾è³´ `app/lib/`
   - å‰ç«¯çµ„ä»¶å¯ä»¥ä¾è³´ `app/lib/` ä½†ä¸æ‡‰ç›´æ¥ä¾è³´ `app/api/admin/_lib/`

3. å®‰å…¨æ€§åŸå‰‡ï¼š
   - `app/api/admin/_lib/` ä¸­çš„åŠŸèƒ½å¿…é ˆé€²è¡Œæ¬Šé™é©—è­‰
   - æ•æ„Ÿæ•¸æ“šå’Œæ“ä½œå¿…é ˆé€šé API è·¯ç”±å±¤ï¼Œè€Œéç›´æ¥åœ¨å‰ç«¯èª¿ç”¨åº«å‡½æ•¸

> **é–‹ç™¼å»ºè­°**:
>
> - å‰µå»ºæ–°æ–‡ä»¶å‰ï¼Œå…ˆç¢ºèªé©åˆçš„ç›®éŒ„ä½ç½®
> - é‡åˆ°è·¨å±¤ä¾è³´éœ€æ±‚æ™‚ï¼Œè€ƒæ…®é‡æ§‹è€Œéç ´å£æ¶æ§‹
> - é¿å…é‡è¤‡å¯¦ç¾å·²æœ‰åŠŸèƒ½ï¼Œå„ªå…ˆå°‹æ‰¾ä¸¦è¤‡ç”¨ç¾æœ‰ä»£ç¢¼

## ç›®éŒ„å…§å®¹

### app/lib/

- `db.ts`: è³‡æ–™åº«é€£æ¥å’ŒæŸ¥è©¢çš„åŸºç¤è¨­æ–½
- `utils.ts`: é€šç”¨å·¥å…·å‡½æ•¸

### app/api/admin/\_lib/

- `auth.ts`: ç®¡ç†å“¡èªè­‰å’Œæˆæ¬Š
- `database.ts`: ç®¡ç†å“¡å°ˆç”¨è³‡æ–™åº«æ“ä½œ
- `jwt.ts`: JWT ä»¤ç‰Œè™•ç†
- `member-database.ts`: æœƒå“¡ç®¡ç†ç›¸é—œæ“ä½œ
- `pet-database.ts`: å¯µç‰©è³‡æ–™ç®¡ç†
- `data-export.ts`: æ•¸æ“šå°å‡ºåŠŸèƒ½
- `data-import.ts`: æ•¸æ“šå°å…¥åŠŸèƒ½
