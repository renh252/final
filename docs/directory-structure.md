# 目錄結構說明

## 主要目錄用途

### `app/lib/`

此目錄包含整個應用程序的共用基礎庫和工具函數：

- 通用資料庫連接和查詢功能
- 共用工具函數（如樣式管理、日期處理等）
- 基礎配置和常量
- 類型定義

特點：

- 提供基礎設施級別的功能
- 可被任何其他模組引用
- 不包含業務邏輯
- 著重於可重用性和通用性

### `app/api/admin/_lib/`

此目錄專門用於後台管理相關的功能：

- 管理員特定的資料庫操作
- 權限驗證和授權
- 數據導入導出功能
- 管理員專用的工具函數

特點：

- 僅服務於後台管理功能
- 包含管理員特定的業務邏輯
- 可以依賴 app/lib 中的基礎功能
- 需要額外的安全性考慮

## 使用原則

1. 新功能開發時的選擇原則：

   - 如果是通用功能，放在 `app/lib/`
   - 如果是管理員專用功能，放在 `app/api/admin/_lib/`

2. 代碼依賴原則：

   - `app/lib/` 不應該依賴 `app/api/admin/_lib/`
   - `app/api/admin/_lib/` 可以依賴 `app/lib/`

3. 安全性原則：
   - `app/api/admin/_lib/` 中的功能必須進行權限驗證
   - `app/lib/` 中的功能應該是權限中立的

## 目錄內容

### app/lib/

- `db.ts`: 資料庫連接和查詢的基礎設施
- `utils.ts`: 通用工具函數

### app/api/admin/\_lib/

- `auth.ts`: 管理員認證和授權
- `database.ts`: 管理員專用資料庫操作
- `jwt.ts`: JWT 令牌處理
- `member-database.ts`: 會員管理相關操作
- `pet-database.ts`: 寵物資料管理
- `data-export.ts`: 數據導出功能
- `data-import.ts`: 數據導入功能
